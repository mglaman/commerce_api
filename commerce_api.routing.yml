route_callbacks:
  - '\Drupal\commerce_api\Routing\Routes::routes'
commerce_api.current_store:
  path: '/%jsonapi%/current-store'
  defaults:
    _jsonapi_resource: Drupal\commerce_api\Resource\CurrentStoreResource
    _jsonapi_resource_types: ['commerce_store--online']
  options:
    # @todo add a response policy based on this route alone, so dynamic page cache is allowed but not page_cache
    no_cache: 'TRUE'
  requirements:
    _access: 'TRUE'

# Prevent JSON:API Schema from crashing on the checkout resource
jsonapi_schema.checkout_order--checkout_order.type:
  path: '/jsonapi/cart/checkout/schema'
  defaults:
    _controller: Drupal\commerce_api\Controller\StubJsonApiSchemaController::noop
  requirements:
    _access: 'TRUE'
